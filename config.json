{
  "BASE_FEATURES": {
    "gamma_wall_width": "max_call_wall_strike - min_put_wall_strike",
    "gamma_wall_mid": "(max_call_wall_strike + min_put_wall_strike) / 2",
    "gamma_wall_width_norm": "gamma_wall_width / (gamma_wall_mid + 1e-9)",
    "gamma_mid_bias": "gamma_wall_mid - gamma_flip_strike",
    "delta_gex": "net_gex.diff()",
    "delta2_gex": "delta_gex.diff()",
    "gamma_flip_velocity": "gamma_flip_strike.diff()",
    "gamma_flip_acceleration": "gamma_flip_velocity.diff()",
    "gex_rolling_std": "net_gex.rolling(20).std()",
    "gex_slope_ratio": "delta_gex / (gex_rolling_std + 1e-9)",
    "delta_gex_rolling_std": "delta_gex.rolling(20).std()",
    "delta_gex_ewm5": "delta_gex.ewm(span=5).mean()",
    "delta_gex_ewm20": "delta_gex.ewm(span=20).mean()",
    "gex_momentum_score": "delta_gex_ewm5 - delta_gex_ewm20",
    "delta_gamma_wall_width_norm": "gamma_wall_width_norm.diff()",
    "compression": "-np.sign(delta_gamma_wall_width_norm) * np.log1p(np.abs(delta_gamma_wall_width_norm) + 1e-9)",
    "dealer_range_energy": "np.abs(delta_gex) * gamma_wall_width_norm",
    "net_gex_rolling_mean": "net_gex.rolling(20).mean()",
    "net_gex_rolling_std": "net_gex.rolling(20).std()",
    "net_gex_z": "(net_gex - net_gex_rolling_mean) / (net_gex_rolling_std + 1e-9)",
    "delta_gex_z": "(delta_gex - delta_gex.rolling(20).mean()) / (delta_gex_rolling_std + 1e-9)",
    "gamma_valley_depth": "1 - np.tanh(np.abs(net_gex_z))",
    "bias": "np.sign(delta_gex)",
    "cro": "bias * compression",
    "cro_rolling_mean": "cro.rolling(20).mean()",
    "cro_rolling_std": "cro.rolling(20).std()",
    "cro_norm": "np.tanh((cro - cro_rolling_mean) / (cro_rolling_std + 1e-9))",
    "gamma_wall_width_norm_shift": "gamma_wall_width_norm.shift(1)",
    "gamma_compression_score": "(gamma_wall_width_norm - gamma_wall_width_norm_shift) / (gamma_wall_width_norm_shift + 1e-9)",
    "gamma_pressure_score": "np.abs(delta_gex) * gamma_valley_depth",
    "gex_osc": "np.tanh((net_gex - net_gex_rolling_mean) / (net_gex_rolling_std + 1e-9))",
    "momentum_osc": "np.tanh(delta_gex / (delta_gex_rolling_std + 1e-9))",
    "cro_osc": "np.tanh((cro - cro_rolling_mean) / (cro_rolling_std + 1e-9))",
    "gex_sign": "np.sign(net_gex)",
    "delta_gex_sign": "np.sign(delta_gex)",
    "momentum_flip": "np.where(delta_gex_sign != delta_gex_sign.shift(1), 1, 0)",
    "compression_flip": "np.where(compression * compression.shift(1) < 0, 1, 0)",
    "cro_flip": "np.where(cro * cro.shift(1) < 0, 1, 0)",
    "gex_z_break_high": "np.where(net_gex_z > 1.0, 1, 0)",
    "gex_z_break_low": "np.where(net_gex_z < -1.0, 1, 0)",
    "gamma_valley_break": "np.where(gamma_valley_depth < 0.4, 1, 0)",
    "gamma_valley_strong": "np.where(gamma_valley_depth > 0.7, 1, 0)",
    "gamma_flip_event": "np.where(gamma_flip_velocity != 0, 1, 0)",
    "gamma_flip_fast": "np.where(abs(gamma_flip_velocity) > abs(gamma_flip_velocity.rolling(5).mean()), 1, 0)",
    "gamma_wall_tightening": "np.where(delta_gamma_wall_width_norm < 0, 1, 0)",
    "gamma_wall_expanding": "np.where(delta_gamma_wall_width_norm > 0, 1, 0)",
    "dealer_energy_high": "np.where(dealer_range_energy > dealer_range_energy.rolling(20).mean(), 1, 0)",
    "gex_pressure_high": "np.where(gamma_pressure_score > gamma_pressure_score.rolling(20).mean(), 1, 0)",
    "gex_pressure_low": "np.where(gamma_pressure_score < gamma_pressure_score.rolling(20).mean(), 1, 0)",
    "gex_osc_cross_up": "np.where((gex_osc > 0) & (gex_osc.shift(1) <= 0), 1, 0)",
    "gex_osc_cross_down": "np.where((gex_osc < 0) & (gex_osc.shift(1) >= 0), 1, 0)",
    "momentum_cross_up": "np.where((momentum_osc > 0) & (momentum_osc.shift(1) <= 0), 1, 0)",
    "momentum_cross_down": "np.where((momentum_osc < 0) & (momentum_osc.shift(1) >= 0), 1, 0)",
    "cro_osc_cross_up": "np.where((cro_osc > 0) & (cro_osc.shift(1) <= 0), 1, 0)",
    "cro_osc_cross_down": "np.where((cro_osc < 0) & (cro_osc.shift(1) >= 0), 1, 0)",
    "compression_flow_agreement": "np.where(np.sign(delta_gex) == np.sign(compression), 1, 0)",
    "reversal_event": "np.where((gamma_valley_strong == 1) & (cro_flip == 1), 1, 0)",
    "momentum_breakout": "np.where((gex_z_break_high == 1) & (momentum_osc > 0), 1, 0)",
    "momentum_breakdown": "np.where((gex_z_break_low == 1) & (momentum_osc < 0), 1, 0)"
  },
  "TSFRESH_METRICS_JSON": {
    "net_gex": "net_gex",
    "gamma_flip_strike_perc": "gamma_flip_strike_perc",
    "max_call_wall_strike_perc": "max_call_wall_strike_perc",
    "min_put_wall_strike_perc": "min_put_wall_strike_perc",
    "wall_distance": "wall_distance",
    "gamma_wall_width_norm": "gamma_wall_width_norm",
    "dealer_range_energy": "dealer_range_energy",
    "gamma_valley_depth": "gamma_valley_depth",
    "gamma_pressure_score": "gamma_pressure_score",
    "CPWO_osc_tanh": "CPWO_osc_tanh",
    "CPWO_osc_mom": "CPWO_osc_mom",
    "net_gex_osc_z": "net_gex_osc_z",
    "net_gex_osc_mom": "net_gex_osc_mom",
    "wall_pressure_score_osc_z": "wall_pressure_score_osc_z",
    "wall_pressure_score_osc_mom": "wall_pressure_score_osc_mom",
    "gw_energy_z_osc_tanh": "gw_energy_z_osc_tanh",
    "wall_distance_osc_z": "wall_distance_osc_z",
    "wall_distance_osc_mom": "wall_distance_osc_mom",
    "wall_distance_compression_rate_osc_z": "wall_distance_compression_rate_osc_z",
    "gamma_dist_z_osc_z": "gamma_dist_z_osc_z",
    "gamma_dist_z_osc_tanh": "gamma_dist_z_osc_tanh",
    "gamma_dist_z_osc_mom": "gamma_dist_z_osc_mom",
    "gamma_flip_momentum_osc_z": "gamma_flip_momentum_osc_z",
    "gamma_flip_momentum_osc_mom": "gamma_flip_momentum_osc_mom",
    "gamma_flip_regime_strength_osc_tanh": "gamma_flip_regime_strength_osc_tanh",
    "gamma_flip_acceleration_osc_z": "gamma_flip_acceleration_osc_z",
    "gamma_flip_volatility_osc_z": "gamma_flip_volatility_osc_z",
    "wall_distance_volatility_osc_z": "wall_distance_volatility_osc_z",
    "dealer_flow_z_osc_tanh": "dealer_flow_z_osc_tanh",
    "dealer_flow_z_osc_mom": "dealer_flow_z_osc_mom",
    "dealer_flow_delta_osc_z": "dealer_flow_delta_osc_z",
    "dealer_flow_score_osc_tanh": "dealer_flow_score_osc_tanh",
    "gw_momentum_osc_z": "gw_momentum_osc_z",
    "gw_momentum_osc_mom": "gw_momentum_osc_mom",
    "gw_volatility_osc_z": "gw_volatility_osc_z",
    "gw_energy_z_osc_z": "gw_energy_z_osc_z"
  }
}